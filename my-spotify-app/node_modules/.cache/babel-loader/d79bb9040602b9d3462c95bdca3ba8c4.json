{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\src\\\\App.js\";\nimport React from 'react';\nimport AppHeader from './AppHeader';\nimport Content from './Content';\nimport axios from 'axios';\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.selectAction = function (action, event) {\n      var adress = window.location.href;\n      console.log(adress);\n      var url = String(adress.location);\n      var start = url.indexOf('localhost:3000/');\n      var stop = url.indexOf('tracksound');\n      var newAction = url.slice(start, stop); // this.setState({\n      //   action\n      // })\n      // console.log(this.state.action)\n\n      console.log(newAction);\n    };\n\n    _this.getGenres = function () {\n      axios({\n        url: \"https://api.spotify.com/v1/recommendations/available-genre-seeds\",\n        headers: {\n          'Authorization': 'Bearer ' + _this.state.mytoken\n        }\n      }).then(function (resp) {\n        _this.setState({\n          typeTracks: resp.data.genres\n        });\n      }).catch(function (error) {\n        console.log(new Error(\"Wyst\\u0105pi\\u0142 problem \".concat(error)));\n        var test400 = String(error).indexOf(\"Request failed with status code 400\");\n        var test401 = String(error).indexOf(\"Request failed with status code 401\");\n\n        if (test400 > -1 || test401 > -1) {\n          _this.refreshToken();\n        }\n      });\n    };\n\n    _this.refreshToken = function () {\n      axios({\n        method: \"GET\",\n        url: 'https://accounts.spotify.com/authorize?client_id=1f1b95fa237c478ea8fed693c7793755&response_type=token&scope=user-read-private%20user-read-email&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2F'\n      }).then(function (resp) {\n        if (window.location.href.indexOf(\"access_token=\") < 0) {\n          var adress = window.open(resp.request.responseURL);\n          adress.addEventListener('load', function (event) {\n            var url = String(adress.location);\n            adress.close();\n            var start = url.indexOf('access_token=') + 13;\n            var stop = url.indexOf('&token_type=');\n            var token = url.slice(start, stop);\n            console.log(_this.state.mytoken);\n\n            _this.setState({\n              mytoken: token\n            });\n\n            _this.getGenres();\n          });\n        }\n      }).catch(function (error) {\n        return console.log(new Error(\"Wyst\\u0105pi\\u0142 problem \".concat(error)));\n      });\n    };\n\n    _this.state = {\n      action: \"homePage\",\n      mytoken: \"\",\n      typeTracks: []\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    // // ++++++++++++++++  Client Credentials Flow ++++++++++++++++++++++++++\n    // token = () =>{\n    //   const CLIENT_ID = 'f9d33397eb674ca789d6fb448a2e7377';\n    //   const CLIENT_SECRET = '8634936da44d49d88f040f28ddc40247';\n    //   const auth = \"Basic \" + new Buffer(CLIENT_ID + \":\" + CLIENT_SECRET).toString('base64')\n    //   console.log(auth)\n    //   axios({\n    //     method: \"POST\",\n    //     url: \"https://accounts.spotify.com/api/token\",\n    //     headers:{\n    //       \"Content-Type\": \"application/x-www-form-urlencoded\",\n    //       \"Authorization\" : \"Basic ZjlkMzMzOTdlYjY3NGNhNzg5ZDZmYjQ0OGEyZTczNzc6ODYzNDkzNmRhNDRkNDlkODhmMDQwZjI4ZGRjNDAyNDc=\",\n    //     },\n    //     data: {\n    //       \"grant_type\": \"authorization_code\",\n    //     },\n    //     // json: true,\n    //     })\n    //     .then(resp => {\n    //       console.log(resp)\n    //     })\n    //     .catch(error => console.log(new Error(`Wystąpił problem ${error}`)))\n    // }\n    value: function render() {\n      if (!localStorage.getItem(\"limit\")) {\n        localStorage.setItem(\"limit\", 20);\n      }\n\n      return React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(AppHeader, {\n        selectAction: this.selectAction,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        className: \"menu-line\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"App-Content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(Content, {\n        action: this.state.action,\n        mytoken: this.state.mytoken,\n        refreshToken: this.refreshToken,\n        getGenres: this.getGenres,\n        typeTracks: this.state.typeTracks,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\Iveno\\Desktop\\Gicior_Z_Bolqiem\\My-spotify\\my-spotify-app\\src\\App.js"],"names":["React","AppHeader","Content","axios","BrowserRouter","Router","App","selectAction","action","event","adress","window","location","href","console","log","url","String","start","indexOf","stop","newAction","slice","getGenres","headers","state","mytoken","then","resp","setState","typeTracks","data","genres","catch","error","Error","test400","test401","refreshToken","method","open","request","responseURL","addEventListener","close","token","localStorage","getItem","setItem","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport AppHeader from './AppHeader';\r\nimport Content from './Content';\r\nimport axios from 'axios';\r\nimport {BrowserRouter as Router} from \"react-router-dom\";\r\n \r\nclass App extends React.Component {\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      action: \"homePage\",\r\n      mytoken : \"\",\r\n      typeTracks: []\r\n    }\r\n  }\r\n \r\n  selectAction = (action, event) =>{\r\n   const adress = window.location.href\r\n   console.log(adress)\r\n    const url = String(adress.location)\r\n    const start = url.indexOf('localhost:3000/');\r\n    const stop = url.indexOf('tracksound');\r\n          const newAction = url.slice(start,stop)\r\n    // this.setState({\r\n    //   action\r\n    // })\r\n    // console.log(this.state.action)\r\n    console.log(newAction)\r\n   \r\n  }\r\n \r\n  getGenres = () =>{\r\n    axios({\r\n      url: `https://api.spotify.com/v1/recommendations/available-genre-seeds`,\r\n      headers: {\r\n        'Authorization': 'Bearer ' + this.state.mytoken\r\n    }}\r\n    ).then( resp =>{\r\n      this.setState({\r\n        typeTracks: resp.data.genres\r\n      })\r\n    })\r\n    .catch(error =>{\r\n      console.log(new Error(`Wystąpił problem ${error}`))\r\n      const test400 = String(error).indexOf(`Request failed with status code 400`)\r\n      const test401 = String(error).indexOf(`Request failed with status code 401`)\r\n      if ((test400 > -1) || (test401 > -1)){\r\n        this.refreshToken()\r\n      }\r\n    })\r\n  }\r\n \r\n \r\n  refreshToken = () =>{\r\n    \r\n    axios({\r\n      method: \"GET\",\r\n      url: 'https://accounts.spotify.com/authorize?client_id=1f1b95fa237c478ea8fed693c7793755&response_type=token&scope=user-read-private%20user-read-email&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2F'\r\n    }).then(resp =>{\r\n      if(window.location.href.indexOf(\"access_token=\") < 0 ){\r\n        const adress = window.open(resp.request.responseURL)\r\n        adress.addEventListener('load', (event) => {\r\n          const url = String(adress.location)\r\n          adress.close()\r\n          const start = url.indexOf('access_token=') + 13;\r\n          const stop = url.indexOf('&token_type=')\r\n          const token = url.slice(start,stop)\r\n          console.log(this.state.mytoken)\r\n          this.setState({\r\n            mytoken: token\r\n          })\r\n         this.getGenres()\r\n        });\r\n      }\r\n       \r\n    })\r\n    .catch(error =>console.log(new Error(`Wystąpił problem ${error}`)))\r\n  }\r\n \r\n \r\n \r\n  // // ++++++++++++++++  Client Credentials Flow ++++++++++++++++++++++++++\r\n  // token = () =>{\r\n  //   const CLIENT_ID = 'f9d33397eb674ca789d6fb448a2e7377';\r\n  //   const CLIENT_SECRET = '8634936da44d49d88f040f28ddc40247';\r\n  //   const auth = \"Basic \" + new Buffer(CLIENT_ID + \":\" + CLIENT_SECRET).toString('base64')\r\n   \r\n  //   console.log(auth)\r\n \r\n  //   axios({\r\n  //     method: \"POST\",\r\n  //     url: \"https://accounts.spotify.com/api/token\",\r\n  //     headers:{\r\n  //       \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n  //       \"Authorization\" : \"Basic ZjlkMzMzOTdlYjY3NGNhNzg5ZDZmYjQ0OGEyZTczNzc6ODYzNDkzNmRhNDRkNDlkODhmMDQwZjI4ZGRjNDAyNDc=\",\r\n  //     },\r\n  //     data: {\r\n  //       \"grant_type\": \"authorization_code\",\r\n  //     },\r\n  //     // json: true,\r\n  //     })\r\n  //     .then(resp => {\r\n  //       console.log(resp)\r\n  //     })\r\n  //     .catch(error => console.log(new Error(`Wystąpił problem ${error}`)))\r\n  // }\r\n \r\n  render() {\r\n    if(!localStorage.getItem(\"limit\")){\r\n      localStorage.setItem(\"limit\" , 20)\r\n    }\r\n \r\n    return (\r\n      <Router>\r\n      <div className=\"App\">\r\n        <AppHeader selectAction={this.selectAction} />\r\n        <hr className='menu-line'/>\r\n        <div className=\"App-Content\">\r\n          <Content action={this.state.action} mytoken={this.state.mytoken} refreshToken={this.refreshToken} getGenres={this.getGenres} typeTracks={this.state.typeTracks}/>\r\n        </div>\r\n      </div>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n \r\nexport default App;"]},"metadata":{},"sourceType":"module"}