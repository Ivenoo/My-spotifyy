{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\src\\\\App.js\";\nimport React from 'react';\nimport AppHeader from './AppHeader';\nimport Content from './Content';\nimport axios from 'axios';\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.selectAction = function (action, event) {\n      _this.setState({\n        action: action\n      });\n    };\n\n    _this.getGenres = function () {\n      axios({\n        url: \"https://api.spotify.com/v1/recommendations/available-genre-seeds\",\n        headers: {\n          'Authorization': 'Bearer ' + _this.state.accessToken\n        }\n      }).then(function (resp) {\n        _this.setState({\n          typeList: resp.data.genres\n        });\n      }).catch(function (error) {\n        console.log(new Error(\"Wyst\\u0105pi\\u0142 problem \".concat(error)));\n        var test400 = String(error).indexOf(\"Request failed with status code 400\");\n        var test401 = String(error).indexOf(\"Request failed with status code 401\");\n\n        if (test400 > -1 || test401 > -1) {\n          _this.refreshToken();\n        }\n      });\n    };\n\n    _this.refreshToken = function () {\n      axios({\n        method: \"GET\",\n        url: 'https://accounts.spotify.com/authorize?client_id=f9d33397eb674ca789d6fb448a2e7377&response_type=token&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2F'\n      }).then(function (resp) {\n        console.log(resp.request.responseURL);\n        console.log(window.location.href);\n\n        if (window.location.href.indexOf(\"access_token=\") < 0) {\n          var adress = window.open(resp.request.responseURL);\n          adress.addEventListener('load', function (event) {\n            var url = String(adress.location);\n            adress.close();\n            var start = url.indexOf('access_token=') + 13;\n            var stop = url.indexOf('&token_type=');\n            var token = url.slice(start, stop);\n            console.log(_this.state.accessToken);\n\n            _this.setState({\n              accessToken: token\n            });\n\n            _this.getGenres();\n          });\n        }\n      }).catch(function (error) {\n        return console.log(new Error(\"Wyst\\u0105pi\\u0142 problem \".concat(error)));\n      });\n    };\n\n    _this.state = {\n      action: \"homePage\",\n      // mytoken : \"BQBA0Viw8M-00r6GCOnKi4MzqHxIUBuCOHpDqOs3eo378Y8R_F4SdlrEjNZFE-3RwvtUMgGMe4HIcacACKbsT6HwtUsLnLjPFhVlbpQ7e2x41vmaib4Fr2MvifuG0BC4piZF9o84O_hOS5HwOl6RxuWKrsfeD7yj6PfR_B2JraW_-HY9HwhyvQ\",\n      mytoken: \"\",\n      typeList: []\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"render\",\n    // // ++++++++++++++++  Client Credentials Flow ++++++++++++++++++++++++++\n    // token = () =>{\n    //   const CLIENT_ID = 'f9d33397eb674ca789d6fb448a2e7377';\n    //   const CLIENT_SECRET = '8634936da44d49d88f040f28ddc40247';\n    //   const auth = \"Basic \" + new Buffer(CLIENT_ID + \":\" + CLIENT_SECRET).toString('base64')\n    //   console.log(auth)\n    //   axios({\n    //     method: \"POST\",\n    //     url: \"https://accounts.spotify.com/api/token\",\n    //     headers:{\n    //       \"Content-Type\": \"application/x-www-form-urlencoded\",\n    //       \"Authorization\" : \"Basic ZjlkMzMzOTdlYjY3NGNhNzg5ZDZmYjQ0OGEyZTczNzc6ODYzNDkzNmRhNDRkNDlkODhmMDQwZjI4ZGRjNDAyNDc=\",\n    //     },\n    //     data: {\n    //       \"grant_type\": \"authorization_code\",\n    //     },\n    //     // json: true,\n    //     })\n    //     .then(resp => {\n    //       console.log(resp)\n    //     })\n    //     .catch(error => console.log(new Error(`Wystąpił problem ${error}`)))\n    // }\n    value: function render() {\n      if (!localStorage.getItem(\"limit\")) {\n        localStorage.setItem(\"limit\", 20);\n      }\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(AppHeader, {\n        selectAction: this.selectAction,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"App-Content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Content, {\n        action: this.state.action,\n        accessToken: this.state.token,\n        refreshToken: this.refreshToken,\n        getGenres: this.getGenres,\n        typeList: this.state.typeList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\Iveno\\Desktop\\Gicior_Z_Bolqiem\\My-spotify\\my-spotify-app\\src\\App.js"],"names":["React","AppHeader","Content","axios","App","selectAction","action","event","setState","getGenres","url","headers","state","accessToken","then","resp","typeList","data","genres","catch","error","console","log","Error","test400","String","indexOf","test401","refreshToken","method","request","responseURL","window","location","href","adress","open","addEventListener","close","start","stop","token","slice","mytoken","localStorage","getItem","setItem","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport AppHeader from './AppHeader'\r\nimport Content from './Content'\r\nimport axios from 'axios';\r\n\r\n\r\n\r\nclass App extends React.Component {\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      action: \"homePage\",\r\n      // mytoken : \"BQBA0Viw8M-00r6GCOnKi4MzqHxIUBuCOHpDqOs3eo378Y8R_F4SdlrEjNZFE-3RwvtUMgGMe4HIcacACKbsT6HwtUsLnLjPFhVlbpQ7e2x41vmaib4Fr2MvifuG0BC4piZF9o84O_hOS5HwOl6RxuWKrsfeD7yj6PfR_B2JraW_-HY9HwhyvQ\",\r\n      mytoken : \"\",\r\n      typeList: []\r\n    }\r\n  }\r\n \r\n  selectAction = (action, event) =>{\r\n    this.setState({\r\n      action\r\n    })\r\n  }\r\n \r\n  getGenres = () =>{\r\n    axios({\r\n      url: `https://api.spotify.com/v1/recommendations/available-genre-seeds`,\r\n      headers: {\r\n        'Authorization': 'Bearer ' + this.state.accessToken\r\n    }}\r\n    ).then( resp =>{\r\n      this.setState({\r\n        typeList: resp.data.genres\r\n      })\r\n    })\r\n    .catch(error =>{\r\n      console.log(new Error(`Wystąpił problem ${error}`))\r\n      const test400 = String(error).indexOf(`Request failed with status code 400`)\r\n      const test401 = String(error).indexOf(`Request failed with status code 401`)\r\n      if ((test400 > -1) || (test401 > -1)){\r\n        this.refreshToken()\r\n      }\r\n    })\r\n  }\r\n \r\n \r\n  refreshToken = () =>{\r\n    axios({\r\n      method: \"GET\",\r\n      url: 'https://accounts.spotify.com/authorize?client_id=f9d33397eb674ca789d6fb448a2e7377&response_type=token&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2F'\r\n    }).then(resp =>{\r\n \r\n      console.log(resp.request.responseURL)\r\n      console.log(window.location.href)\r\n \r\n      if(window.location.href.indexOf(\"access_token=\") < 0 ){\r\n        const adress = window.open(resp.request.responseURL)\r\n        adress.addEventListener('load', (event) => {\r\n          const url = String(adress.location)\r\n          adress.close()\r\n          const start = url.indexOf('access_token=') + 13;\r\n          const stop = url.indexOf('&token_type=')\r\n          const token = url.slice(start,stop)\r\n          console.log(this.state.accessToken)\r\n          this.setState({\r\n            accessToken: token\r\n          })\r\n          this.getGenres()\r\n        });\r\n      }\r\n       \r\n    })\r\n    .catch(error =>console.log(new Error(`Wystąpił problem ${error}`)))\r\n  }\r\n \r\n \r\n \r\n  // // ++++++++++++++++  Client Credentials Flow ++++++++++++++++++++++++++\r\n  // token = () =>{\r\n  //   const CLIENT_ID = 'f9d33397eb674ca789d6fb448a2e7377';\r\n  //   const CLIENT_SECRET = '8634936da44d49d88f040f28ddc40247';\r\n  //   const auth = \"Basic \" + new Buffer(CLIENT_ID + \":\" + CLIENT_SECRET).toString('base64')\r\n   \r\n  //   console.log(auth)\r\n \r\n  //   axios({\r\n  //     method: \"POST\",\r\n  //     url: \"https://accounts.spotify.com/api/token\",\r\n  //     headers:{\r\n  //       \"Content-Type\": \"application/x-www-form-urlencoded\",\r\n  //       \"Authorization\" : \"Basic ZjlkMzMzOTdlYjY3NGNhNzg5ZDZmYjQ0OGEyZTczNzc6ODYzNDkzNmRhNDRkNDlkODhmMDQwZjI4ZGRjNDAyNDc=\",\r\n  //     },\r\n  //     data: {\r\n  //       \"grant_type\": \"authorization_code\",\r\n  //     },\r\n  //     // json: true,\r\n  //     })\r\n  //     .then(resp => {\r\n  //       console.log(resp)\r\n  //     })\r\n  //     .catch(error => console.log(new Error(`Wystąpił problem ${error}`)))\r\n  // }\r\n \r\n  render() {\r\n    if(!localStorage.getItem(\"limit\")){\r\n      localStorage.setItem(\"limit\" , 20)\r\n    }\r\n \r\n    return (\r\n      <div className=\"App\">\r\n        <AppHeader selectAction={this.selectAction} />\r\n        <hr/>\r\n        <div className=\"App-Content\">\r\n          <Content action={this.state.action} accessToken={this.state.token} refreshToken={this.refreshToken} getGenres={this.getGenres} typeList={this.state.typeList}/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default App;"]},"metadata":{},"sourceType":"module"}