{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Iveno\\\\Desktop\\\\Gicior_Z_Bolqiem\\\\My-spotify\\\\my-spotify-app\\\\src\\\\App.js\";\nimport React from 'react';\nimport AppHeader from './AppHeader';\nimport Content from './Content';\nimport axios from 'axios';\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.getGenres = function () {\n      axios({\n        url: \"https://api.spotify.com/v1/browse/categories?limit=50\",\n        headers: {\n          'Authorization': 'Bearer ' + _this.state.mytoken\n        }\n      }).then(function (resp) {\n        _this.setState({\n          typeTracks: resp.data.categories.items\n        });\n      }).catch(function (error) {\n        console.log(new Error(\"Wyst\\u0105pi\\u0142 problem \".concat(error)));\n        var test400 = String(error).indexOf(\"Request failed with status code 400\");\n        var test401 = String(error).indexOf(\"Request failed with status code 401\");\n\n        if (test400 > -1 || test401 > -1) {\n          _this.refreshToken();\n        }\n      });\n    };\n\n    _this.refreshToken = function () {\n      var request = require(\"request\");\n\n      var options = {\n        method: 'POST',\n        url: 'https://accounts.spotify.com/api/token',\n        qs: {\n          grant_type: 'client_credentials'\n        },\n        headers: {\n          'cache-control': 'no-cache',\n          Connection: 'keep-alive',\n          'content-length': '',\n          'accept-encoding': 'gzip, deflate',\n          cookie: '_ga=GA1.2.729828902.1557929894; _gid=GA1.2.629422520.1557929894',\n          Host: 'accounts.spotify.com',\n          'Postman-Token': 'efd95536-22cb-4ef2-ae72-e723183d6cd6,4c56ad54-2d22-4dd2-8774-968820564f2f',\n          'Cache-Control': 'no-cache',\n          Accept: '*/*',\n          'User-Agent': 'PostmanRuntime/7.13.0',\n          Authorization: 'Basic MWYxYjk1ZmEyMzdjNDc4ZWE4ZmVkNjkzYzc3OTM3NTU6MmVlNjIwM2Q5NDU3NDVjNjgzNmExMzg0MWRhMDUzYTY=',\n          'Content-Type': 'application/x-www-form-urlencoded'\n        }\n      };\n      request(options, function (error, response, body) {\n        if (error) throw new Error(error);\n\n        if (response) {\n          response = JSON.parse(response.body);\n\n          _this.setState({\n            mytoken: response.access_token\n          });\n\n          _this.getGenres();\n\n          setTimeout(function () {\n            _this.refreshToken();\n          }, 3500000);\n        }\n      });\n    };\n\n    _this.check = function () {\n      if (_this.state.mytoken === '') {\n        _this.refreshToken();\n      }\n    };\n\n    _this.setClass = function () {\n      var menuItems = document.querySelectorAll('.Menu-Buttons');\n      var phoneMenuIcon = document.querySelector('.Phone-Menu');\n\n      if (document.querySelectorAll(\".Menu-Buttons-Open\").length === 0) {\n        phoneMenuIcon.classList.add(\"Phone-Menu-Selected\");\n        menuItems.forEach(function (element) {\n          return element.classList.add(\"Menu-Buttons-Open\");\n        });\n      } else {\n        phoneMenuIcon.classList.remove(\"Phone-Menu-Selected\");\n        menuItems.forEach(function (element) {\n          return element.classList.remove(\"Menu-Buttons-Open\");\n        });\n      }\n    };\n\n    _this.state = {\n      mytoken: \"\",\n      typeTracks: []\n    };\n    return _this;\n  } // POBIERANIE LISTY  TYPÃ“W MUZYKI //\n\n\n  _createClass(App, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (!localStorage.getItem(\"limit\")) {\n        localStorage.setItem(\"limit\", 20);\n      }\n\n      this.check();\n      console.log(this.state.mytoken);\n      return React.createElement(Router, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"Loader-Shadow-Box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"Loader\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"Loader-Icon\",\n        alt: \" \",\n        src: \"./img/loader.gif\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"centralaxDD\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        src: \"./img/scroll-up.png\",\n        className: \"Phone-Menu\",\n        alt: \" \",\n        onClick: function onClick() {\n          return _this2.setClass();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(AppHeader, {\n        selectAction: this.selectAction,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(Content, {\n        action: this.state.action,\n        mytoken: this.state.mytoken,\n        refreshToken: this.refreshToken,\n        getGenres: this.getGenres,\n        typeTracks: this.state.typeTracks,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["C:\\Users\\Iveno\\Desktop\\Gicior_Z_Bolqiem\\My-spotify\\my-spotify-app\\src\\App.js"],"names":["React","AppHeader","Content","axios","BrowserRouter","Router","App","getGenres","url","headers","state","mytoken","then","resp","setState","typeTracks","data","categories","items","catch","error","console","log","Error","test400","String","indexOf","test401","refreshToken","request","require","options","method","qs","grant_type","Connection","cookie","Host","Accept","Authorization","response","body","JSON","parse","access_token","setTimeout","check","setClass","menuItems","document","querySelectorAll","phoneMenuIcon","querySelector","length","classList","add","forEach","element","remove","localStorage","getItem","setItem","selectAction","action","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport AppHeader from './AppHeader';\r\nimport Content from './Content';\r\nimport axios from 'axios';\r\nimport {BrowserRouter as Router} from \"react-router-dom\";\r\n \r\nclass App extends React.Component {\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      mytoken : \"\",\r\n      typeTracks: []\r\n    }\r\n  }\r\n \r\n  \r\n                      // POBIERANIE LISTY  TYPÃ“W MUZYKI //\r\n  getGenres = () =>{\r\n    axios({\r\n      url: `https://api.spotify.com/v1/browse/categories?limit=50`,\r\n      headers: {\r\n        'Authorization': 'Bearer ' + this.state.mytoken\r\n    }}\r\n    ).then( resp =>{\r\n      this.setState({\r\n        typeTracks: resp.data.categories.items\r\n      })\r\n    })\r\n    .catch(error =>{\r\n      console.log(new Error(`WystÄ…piÅ‚ problem ${error}`))\r\n      const test400 = String(error).indexOf(`Request failed with status code 400`)\r\n      const test401 = String(error).indexOf(`Request failed with status code 401`)\r\n      if ((test400 > -1) || (test401 > -1)){\r\n        this.refreshToken()\r\n      }\r\n    })\r\n  }\r\n                              // ODSWIEZANIE TOKENA //\r\n  refreshToken = () =>{\r\n    const request = require(\"request\");\r\n     \r\n    const options = { method: 'POST',\r\n      url: 'https://accounts.spotify.com/api/token',\r\n      qs: { grant_type: 'client_credentials' },\r\n      headers:\r\n       { 'cache-control': 'no-cache',\r\n         Connection: 'keep-alive',\r\n         'content-length': '',\r\n         'accept-encoding': 'gzip, deflate',\r\n         cookie: '_ga=GA1.2.729828902.1557929894; _gid=GA1.2.629422520.1557929894',\r\n         Host: 'accounts.spotify.com',\r\n         'Postman-Token': 'efd95536-22cb-4ef2-ae72-e723183d6cd6,4c56ad54-2d22-4dd2-8774-968820564f2f',\r\n         'Cache-Control': 'no-cache',\r\n         Accept: '*/*',\r\n         'User-Agent': 'PostmanRuntime/7.13.0',\r\n         Authorization: 'Basic MWYxYjk1ZmEyMzdjNDc4ZWE4ZmVkNjkzYzc3OTM3NTU6MmVlNjIwM2Q5NDU3NDVjNjgzNmExMzg0MWRhMDUzYTY=',\r\n         'Content-Type': 'application/x-www-form-urlencoded' } };\r\n     \r\n    request(options,  (error, response, body) => {\r\n      if (error) throw new Error(error);\r\n      if (response){\r\n        response = JSON.parse(response.body)\r\n        this.setState({\r\n          mytoken: response.access_token\r\n        })\r\n        this.getGenres()\r\n        setTimeout(()=>{this.refreshToken()} , 3500000)\r\n      }\r\n    });  \r\n  }\r\n\r\n\r\n\r\n  check = () =>{\r\n    if(this.state.mytoken === ''){\r\n      this.refreshToken() \r\n    }\r\n  } \r\n\r\n  setClass = () => {\r\n    let menuItems = document.querySelectorAll('.Menu-Buttons');\r\n    let phoneMenuIcon = document.querySelector('.Phone-Menu');\r\n \r\n    if(document.querySelectorAll(\".Menu-Buttons-Open\").length === 0){\r\n      phoneMenuIcon.classList.add(\"Phone-Menu-Selected\")\r\n      menuItems.forEach(element=>\r\n        element.classList.add(\"Menu-Buttons-Open\")\r\n      )\r\n    }\r\n    else{\r\n      phoneMenuIcon.classList.remove(\"Phone-Menu-Selected\")\r\n      menuItems.forEach(element=>\r\n        element.classList.remove(\"Menu-Buttons-Open\")\r\n      )\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if(!localStorage.getItem(\"limit\")){\r\n      localStorage.setItem(\"limit\" , 20)\r\n    }\r\n  \r\n    this.check()\r\n    console.log(this.state.mytoken)\r\n    return (   \r\n      <Router>\r\n      <div className=\"App\">\r\n      <div className=\"Loader-Shadow-Box\"></div>\r\n        <div className=\"Loader\"><img  className=\"Loader-Icon\" alt=\" \" src='./img/loader.gif'/></div>\r\n      <div className=\"centralaxDD\"></div>\r\n      <img src=\"./img/scroll-up.png\" className=\"Phone-Menu\" alt=\" \" onClick={()=>this.setClass()}></img>\r\n        <AppHeader selectAction={this.selectAction} />\r\n        <Content action={this.state.action} mytoken={this.state.mytoken} refreshToken={this.refreshToken} getGenres={this.getGenres} typeTracks={this.state.typeTracks}/> \r\n      </div>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n \r\nexport default App;"]},"metadata":{},"sourceType":"module"}